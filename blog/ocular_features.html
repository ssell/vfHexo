<!DOCTYPE html>
<head>
    
    <title>Ocular Features</title>

    <link rel="icon" type="image/png" href="/images/favicon.png">
    <link href='https://fonts.googleapis.com/css?family=Lato' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Catamaran:700' rel='stylesheet' type='text/css'>

    <script type="text/javascript" async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script>    

    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/codeformat.css">
</head>

<body>
    <div id="container">
        <div id="header">
            <a href="http://www.vertexfragment.com/"><div id="header_logo"></div></a>
        </div>

        <div id="body">
            <div id="navbar">
    <div id="main_nav" class="nav_sidebar important_text">
        
            <div class="nav_item"><a href="/blog/index.html">Blog</a></div>
            <div class="nav_item"><a href="/home/projects.html">Projects</a></div>
            <div class="nav_item"><a href="/home/about.html">About</a></div>
        
    </div>
    <div id="secondary_nav" class="nav_sidebar important_text">
        

    </div>
</div>

 
            <div id="content">
                <div id="page_title" class="important_text">
    Ocular Features
</div>


    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#General-Engine-Functionality"><span class="toc-number">1.</span> <span class="toc-text">General Engine Functionality</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Logger"><span class="toc-number">1.1.</span> <span class="toc-text">Logger</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Event-System"><span class="toc-number">1.2.</span> <span class="toc-text">Event System</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#File-Directory"><span class="toc-number">1.3.</span> <span class="toc-text">File / Directory</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Timing"><span class="toc-number">1.4.</span> <span class="toc-text">Timing</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Keyboard-Mouse-Input"><span class="toc-number">1.5.</span> <span class="toc-text">Keyboard / Mouse Input</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Window-Creation"><span class="toc-number">1.6.</span> <span class="toc-text">Window Creation</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Utilities"><span class="toc-number">1.7.</span> <span class="toc-text">Utilities</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#String-Utilities"><span class="toc-number">1.7.1.</span> <span class="toc-text">String Utilities</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Hash-Generator"><span class="toc-number">1.7.2.</span> <span class="toc-text">Hash Generator</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Endian-Operators"><span class="toc-number">1.7.3.</span> <span class="toc-text">Endian Operators</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TypeName"><span class="toc-number">1.7.4.</span> <span class="toc-text">TypeName</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Void-Cast"><span class="toc-number">1.7.5.</span> <span class="toc-text">Void Cast</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#General-Math-Library"><span class="toc-number">1.8.</span> <span class="toc-text">General Math Library</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Psuedo-Random-Number-Generators"><span class="toc-number">1.9.</span> <span class="toc-text">Psuedo-Random Number Generators</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Noise-Generators"><span class="toc-number">1.10.</span> <span class="toc-text">Noise Generators</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Bounds-and-Intersections"><span class="toc-number">1.11.</span> <span class="toc-text">Bounds and Intersections</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Resource-System"><span class="toc-number">2.</span> <span class="toc-text">Resource System</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Resource-Manager"><span class="toc-number">2.1.</span> <span class="toc-text">Resource Manager</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Retrieving-a-Resource"><span class="toc-number">2.1.1.</span> <span class="toc-text">Retrieving a Resource</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Saving-a-Resource"><span class="toc-number">2.1.2.</span> <span class="toc-text">Saving a Resource</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Destroying-a-Resource"><span class="toc-number">2.1.3.</span> <span class="toc-text">Destroying a Resource</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Unmanaged-Resources"><span class="toc-number">2.1.4.</span> <span class="toc-text">Unmanaged Resources</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Refreshing-Resource-Map"><span class="toc-number">2.1.5.</span> <span class="toc-text">Refreshing Resource Map</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Resource-Readers-and-Savers"><span class="toc-number">2.2.</span> <span class="toc-text">Resource Readers and Savers</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Scene-System"><span class="toc-number">3.</span> <span class="toc-text">Scene System</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#SceneObjects"><span class="toc-number">3.1.</span> <span class="toc-text">SceneObjects</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Renderables"><span class="toc-number">3.2.</span> <span class="toc-text">Renderables</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Routines"><span class="toc-number">3.3.</span> <span class="toc-text">Routines</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SceneTrees"><span class="toc-number">3.4.</span> <span class="toc-text">SceneTrees</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Camera"><span class="toc-number">3.5.</span> <span class="toc-text">Camera</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Object-IO"><span class="toc-number">3.6.</span> <span class="toc-text">Object IO</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Graphics-Library"><span class="toc-number">4.</span> <span class="toc-text">Graphics Library</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#GraphicsDriver"><span class="toc-number">4.1.</span> <span class="toc-text">GraphicsDriver</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Textures"><span class="toc-number">4.2.</span> <span class="toc-text">Textures</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Shaders"><span class="toc-number">4.3.</span> <span class="toc-text">Shaders</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Uniforms"><span class="toc-number">4.4.</span> <span class="toc-text">Uniforms</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Materials"><span class="toc-number">4.5.</span> <span class="toc-text">Materials</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Meshes"><span class="toc-number">4.6.</span> <span class="toc-text">Meshes</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Render-State"><span class="toc-number">4.7.</span> <span class="toc-text">Render State</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Debug-Tools"><span class="toc-number">4.8.</span> <span class="toc-text">Debug Tools</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Graphics-Implementations"><span class="toc-number">5.</span> <span class="toc-text">Graphics Implementations</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Direct3D-11"><span class="toc-number">5.1.</span> <span class="toc-text">Direct3D 11</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#OpenGL-4"><span class="toc-number">5.2.</span> <span class="toc-text">OpenGL 4</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Other"><span class="toc-number">5.3.</span> <span class="toc-text">Other</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Effects"><span class="toc-number">6.</span> <span class="toc-text">Effects</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Lighting"><span class="toc-number">6.1.</span> <span class="toc-text">Lighting</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Shadows"><span class="toc-number">6.2.</span> <span class="toc-text">Shadows</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Particle-Systems"><span class="toc-number">6.3.</span> <span class="toc-text">Particle Systems</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Terrain"><span class="toc-number">6.4.</span> <span class="toc-text">Terrain</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Editor"><span class="toc-number">7.</span> <span class="toc-text">Editor</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Scene-Editing"><span class="toc-number">7.1.</span> <span class="toc-text">Scene Editing</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Material-Editing"><span class="toc-number">7.2.</span> <span class="toc-text">Material Editing</span></a></li></ol></li></ol>


<div id="page_content">
    <p>Features</p>
<h1 id="General-Engine-Functionality"><a href="#General-Engine-Functionality" class="headerlink" title="General Engine Functionality"></a>General Engine Functionality</h1><p>Collection of features that are expected to be found in any engine, but are not directly related to graphics or rendering. Nearly all of these were implemented before a single line of the graphics library was written.</p>
<h2 id="Logger"><a href="#Logger" class="headerlink" title="Logger"></a>Logger</h2><p>An easy-to-use and versatile logging system is an essential part of any engine, large or small. </p>
<p>The logger for Ocular is implemented as a central logger class to whom listeners may register. These listeners can be implemented in any form, and simply have to inherit the <code>onLogMessage</code> method. Multiple loggers already exist in the engine, including:</p>
<ul>
<li>ConsoleLogger: Prints log messages to the window console (if console is present).</li>
<li>VSConsoleLogger: Prints log messages to the Visual Studio debugger output console.</li>
<li>ConsoleText: Prints log messages to the Ocular Editor console widget.</li>
</ul>
<p>Writing to the logger, and thus to all listeners, can be done as follows:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">OcularLogger-&gt;error(<span class="string">"An error has occurred!"</span>); </span><br></pre></td></tr></table></figure>

Where the method may be any of the following: fatal, error, warning, debug, info.


Multiple parameters may be passed to the logger, which will automatically concatenate the message.

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">OcularLogger-&gt;info(<span class="string">"The time is "</span>, hour, <span class="string">":"</span>, minute, <span class="string">":"</span>, second); </span><br></pre></td></tr></table></figure>
<p>Internal logging also makes use of the <code>OCULAR_INTERNAL_LOG</code> macro which helps in provided exact Class/Method/Line information which is especially useful for error logging.</p>
<h2 id="Event-System"><a href="#Event-System" class="headerlink" title="Event System"></a>Event System</h2><p>A simple event system is provided in order to allow for easy communication between disparate systems. Custom events are easy to add, and a number of events are already in use by both the engine and editor.</p>
<p>All events are generated by a central manager who then distributes the event to registered listeners. Listeners assign themselves a priority which determines the order in which they receive an event through their <code>onEvent</code> method.</p>
<p>Example of generating and then receiving an Event:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> EventGenerator::mouseWheelEvent(<span class="keyword">uint32_t</span> <span class="keyword">const</span> delta)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// Generate a mouse wheel movement event</span></span><br><span class="line">    OcularEvents-&gt;queueEvent(<span class="built_in">std</span>::make_shared&lt;MouseScrollInputEvent&gt;(delta));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">EventReceiver::EventReceiver()</span><br><span class="line">&#123;</span><br><span class="line">    OcularEvents-&gt;registerListener(<span class="keyword">this</span>, Priority::Medium);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">bool</span> EventReceiver::onEvent(<span class="built_in">std</span>::<span class="built_in">shared_ptr</span>&lt;Core::AEvent&gt; event)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span>(event-&gt;isType&lt;MouseScrollInputEvent&gt;())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Return true to not consume the event</span></span><br><span class="line">    return <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Events may either be queued or triggered. A queued event is placed in a queue and then distributed during the next update cycle. A triggered event is distributed immediately to listeners.</p>
<h2 id="File-Directory"><a href="#File-Directory" class="headerlink" title="File / Directory"></a>File / Directory</h2><p><code>File</code> and <code>Directory</code> classes are available for easy, cross-platform navigation of file systems. A number of utility features are available, including: path/name/extension separation, discovering child files/subdirectories, file/directory creation, etc.</p>
<p>Internally, the <code>File</code> and <code>Directory</code> classes are essentially wrappers around Boost classes but proposed additions in C++17 will see a rewrite of the <code>File</code> and <code>Directory</code> classes.</p>
<p>Example of retrieving the first file in a directory:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Directory <span class="title">dir</span><span class="params">(<span class="string">"test"</span>)</span></span>;</span><br><span class="line">dir.explore();</span><br><span class="line"></span><br><span class="line"><span class="keyword">auto</span> files = dir.getChildFiles();</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(files.size())</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> extension = files[<span class="number">0</span>].getExtension();</span><br><span class="line">    OcularLogger-&gt;info(<span class="string">"First file has extension of "</span>, extension);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">    OcularLogger-&gt;info(<span class="string">"Directory contains no files."</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Timing"><a href="#Timing" class="headerlink" title="Timing"></a>Timing</h2><p>Time functionality is provided via two different classes: <code>Clock</code> and <code>Timer</code>.</p>
<p>A clock can provide time as two different deltas: epoch or creation. Epoch delta time is the amount of time elapsed since January 1, 1970. Creation delta time is the amount of time elapsed since the <code>Clock</code> instance was created.</p>
<p>All time deltas can be retrieved as either milliseconds or nanoseconds, depending on the amount of precision required.</p>
<p>The timer is used as a stopwatch with start, stop, and reset methods. </p>
<p>Example of retrieving amount of time since Ocular Engine initialization:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">auto</span> lifetime = OcularClock-&gt;getElapsedMS();</span><br><span class="line">OcularLogger-&gt;info(<span class="string">"Engine has been running for "</span>, (lifetime / <span class="number">1000</span>), <span class="string">" seconds."</span>);</span><br></pre></td></tr></table></figure>
<p>Example of hard pausing for a second:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Timer timer;</span><br><span class="line">timer.start();</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(timer.getElapsedMS() &lt; <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line">timer.stop();</span><br></pre></td></tr></table></figure>
<h2 id="Keyboard-Mouse-Input"><a href="#Keyboard-Mouse-Input" class="headerlink" title="Keyboard / Mouse Input"></a>Keyboard / Mouse Input</h2><p>Keyboard and mouse input is handled via a state system defined in <code>OcularInput</code> and input-related events.</p>
<p>At any time the state of the keyboard and mouse can be queried, including:</p>
<ul>
<li>Keyboard key state (pressed, released)</li>
<li>Keyboard modifiers</li>
<li>Mouse button state (pressed, released)</li>
<li>Mouse position</li>
</ul>
<p>Events are also generated whenever the state of a keyboard key, mouse button, mouse position, or mouse scrollwheel is changed.</p>
<p>All system input events are handled (and translated for Ocular) in Window implementations. For Windows this is done by receiving the raw device input.</p>
<p>Keys that require modifiers (such as <code>1</code> vs <code>!</code>) are treated distinctly, and so can be directly queried. For example, </p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">auto</span> keyOne = KeyboardKeys::Mainpad1;</span><br><span class="line"><span class="keyword">auto</span> keyExclamation = KeyboardKeys::ExclamationMark;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(OcularInput-&gt;isKeyboardKeyDown(keyOne))</span><br><span class="line">&#123;</span><br><span class="line">    OcularLogger-&gt;info(<span class="string">"1"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(OcularInput-&gt;isKeyboardKeyDown(keyExclamation))</span><br><span class="line">&#123;</span><br><span class="line">    OcularLogger-&gt;info(<span class="string">"!"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> 
<p>Distinctions are also made between mainpad and numpad keys.</p>
<h2 id="Window-Creation"><a href="#Window-Creation" class="headerlink" title="Window Creation"></a>Window Creation</h2><p>Window creation is performed in a single call to the central <code>WindowManager</code> implementation which can be accessed via <code>OcularWindows</code>.</p>
<p>Example:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">WindowDescriptor descr;</span><br><span class="line"></span><br><span class="line">descr.displayName   = <span class="string">"Test Window"</span>;</span><br><span class="line">descr.width         = <span class="number">800</span>;</span><br><span class="line">descr.height        = <span class="number">600</span>;</span><br><span class="line">descr.displayMode   = WindowDisplayMode::WindowedBordered;</span><br><span class="line">descr.exclusiveMode = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(OcularWindows-&gt;openWindow(descr))</span><br><span class="line">&#123;</span><br><span class="line">    OcularWindows-&gt;getMainWindow()-&gt;showCursor(<span class="literal">false</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Internally, system specific implementations are provided such as <code>WindowWin32</code>. A variety of miscellaneous methods and tasks are associated with these window implementations, including system-level event and input intercepting.</p>
<h2 id="Utilities"><a href="#Utilities" class="headerlink" title="Utilities"></a>Utilities</h2><p>There are numerous miscellaneous utilities in use throughout the engine. The following are some of the most commonly employed.</p>
<h3 id="String-Utilities"><a href="#String-Utilities" class="headerlink" title="String Utilities"></a>String Utilities</h3><p>A collection of string-based utilities can be found by envoking <code>OcularString</code> (or some may be statically accessed via Utils::String). These cover the following common string operations:</p>
<ul>
<li>Convert to lower/upper case</li>
<li>Equality check, including case sensitivity</li>
<li>Substring containment</li>
<li>Split/tokenizing</li>
<li>String conversions</li>
</ul>
<p>The most widely used of these is string conversion methods that allow one two convert a string to/from nearly any type or commonly used class.</p>
<p>For example, converting to and from a Vector4f is as simple as:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Vector4f <span class="title">vec</span><span class="params">(<span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">1.0f</span>)</span></span>;</span><br><span class="line">OcularLogger-&gt;info(OcularString-&gt;toString(vec));</span><br><span class="line"></span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">string</span> str = <span class="string">"1.0 2.0 3.0 4.0"</span>;</span><br><span class="line">vec = OcularString-&gt;fromString&lt;Vector4f&gt;(str);</span><br></pre></td></tr></table></figure>
<h3 id="Hash-Generator"><a href="#Hash-Generator" class="headerlink" title="Hash Generator"></a>Hash Generator</h3><p>The <code>HashGenerator</code> utility provides a simple and efficient means to generate integer hashes from any string. Internally it implements the <a href="https://en.wikipedia.org/wiki/Fowler%E2%80%93Noll%E2%80%93Vo_hash_function#FNV-1a_hash" target="_blank" rel="external">FNV-1A</a> algorithm.</p>
<p>It can generate both 32 and 64-bit hashes.</p>
<p>Example:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span> str = <span class="string">"Hello World"</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">auto</span> hash = OcularEngine.HashGenerator()-&gt;getHash32(str);</span><br></pre></td></tr></table></figure>
<h3 id="Endian-Operators"><a href="#Endian-Operators" class="headerlink" title="Endian Operators"></a>Endian Operators</h3><p>A series of functions are provided under the <code>Ocular::Utils::EndianOps</code> namespace to help in converting between big and little endian values. </p>
<p>These functions come in two different flavors: converting to a known endian type, or converting to the reverse endianness.</p>
<p>For example, if we know we have a big endian value that we wish to convert to little endian (a common scenario when working with files), then we can do the following:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">uint32_t</span> bigInt = ...;</span><br><span class="line"><span class="keyword">uint32_t</span> littleInt = EndianOps::convert(Endianness::Big, Endianness::Little, bigInt);</span><br></pre></td></tr></table></figure>
<p>We can also convert to whatever the native endianness may be (in which case no action may be taken):</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">uint32_t</span> native = EndianOps::convert(Endianness::Big, Endianness::Native, bigInt);</span><br></pre></td></tr></table></figure>
<h3 id="TypeName"><a href="#TypeName" class="headerlink" title="TypeName"></a>TypeName</h3><p>The <code>TypeName</code> utility is relatively simple, but is crucial for many key systems. All it does is provide a string representation of any primitive type and most commonly used Ocular classes. </p>
<p>Example:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">OcularLogger-&gt;info(TypeName&lt;<span class="keyword">float</span>&gt;::name);</span><br><span class="line"><span class="comment">// "float"</span></span><br><span class="line"></span><br><span class="line">OcularLogger-&gt;info(TypeName&lt;Matrix4x4&gt;::name);</span><br><span class="line"><span class="comment">// "Matrix4x4"</span></span><br></pre></td></tr></table></figure>
<p>Associating a string name with a type/class is as simple as invoking one of two different macros. One will automatically assign a name, while the other lets you specify a custom name string.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">OCULAR_REGISTER_TYPE(CustomClass);</span><br><span class="line">OCULAR_REGISTER_TYPE_CUSTOM(CustomClass, <span class="string">"Custom Class"</span>);</span><br></pre></td></tr></table></figure>
<h3 id="Void-Cast"><a href="#Void-Cast" class="headerlink" title="Void Cast"></a>Void Cast</h3><p>Another commonly used helper utility is <code>void_cast</code> which, well, casts to/and from <code>void*</code>.</p>
<p>Example:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">float</span> valueA = <span class="number">55.0f</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span>* voidp  = void_cast&lt;<span class="keyword">float</span>&gt;(valueA);</span><br><span class="line"><span class="keyword">float</span> valueB = void_cast&lt;<span class="keyword">float</span>&gt;(voidp);</span><br><span class="line"></span><br><span class="line"><span class="comment">// valueB == 55.0f</span></span><br></pre></td></tr></table></figure>
<h2 id="General-Math-Library"><a href="#General-Math-Library" class="headerlink" title="General Math Library"></a>General Math Library</h2><p>A general purpose math library is provided with support for:</p>
<ul>
<li>Vector2</li>
<li>Vector3</li>
<li>Vector4</li>
<li>Matrix3x3</li>
<li>Matrix4x4</li>
<li>Euler</li>
<li>Quaternion</li>
</ul>
<p>All common functionality is available (such as length, dot/dross product, inverse, matrix projection, etc.), and full conversions between like-types (Rotation Matrix &lt;-&gt; Quaternion &lt;-&gt; Euler Angle).</p>
<p>Internally, the general math classes employ the <a href="http://glm.g-truc.net/" target="_blank" rel="external">GLM</a> library. Initially Ocular had a custom library created from scratch, but it was later deemed that it would be easier and safer to make use of an established mathematics library.</p>
<p>As with all other dependencies, GLM is kept completely hidden from outside sources so that it is only a dependency for the core library.</p>
<h2 id="Psuedo-Random-Number-Generators"><a href="#Psuedo-Random-Number-Generators" class="headerlink" title="Psuedo-Random Number Generators"></a>Psuedo-Random Number Generators</h2><p>Access to a proper PRNG is important for both general-purpose and graphics related programming. Since not all PRNGs are created equal, and some better suit certain tasks than others, a number of implementations are available.</p>
<p>These include:</p>
<ul>
<li>Mersenne Twister (MT19937)</li>
<li>Tiny Mersenne Twister (MT127)</li>
<li>Well Equidistributed Long-Period Linear (WELL512)</li>
<li>Complementary-Multiply-With-Carry (CMWC131104)</li>
<li>XorSHift (XOR96)</li>
</ul>
<p>All PRNGs implement the same interface, and thus can be swapped out for one another easily.</p>
<p>Example:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">auto</span> prng = Random::CreatePRNG(PRNG::XorShift);</span><br><span class="line"><span class="keyword">auto</span> rand = prng.next(<span class="number">0</span>, <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line">OcularLogger-&gt;info(<span class="string">"Random value between 0 and 100: "</span>, rand);</span><br></pre></td></tr></table></figure>
<h2 id="Noise-Generators"><a href="#Noise-Generators" class="headerlink" title="Noise Generators"></a>Noise Generators</h2><p>Coherent noise is another important tool used by graphics programmers, and so naturally Ocular provides multiple noise implementations. Like the PRNGs, these all inherit from the same base class and can be easily swapped out.</p>
<ul>
<li>Perlin Noise</li>
<li>Simplex Noise</li>
<li>Wavelet Noise</li>
</ul>
<p>Additional noise algorithms are ready, but have not yet been fully integrated (Worley, Diamond-Square, etc.).</p>
<p>Example:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PerlinNoise noise;</span><br><span class="line"><span class="keyword">auto</span> value = noise.getValue(x, y);</span><br></pre></td></tr></table></figure>
<p>As noise generators are most commonly used in conjuction with 2D textures, there is a special texture class called <code>NoiseTexture2D</code> that automatically generates textures using a provided noise instance.</p>
<h2 id="Bounds-and-Intersections"><a href="#Bounds-and-Intersections" class="headerlink" title="Bounds and Intersections"></a>Bounds and Intersections</h2><p>While Ocular makes no attempts (yet) to implement a physics engine, basic intersection testing remains a cruical tool for many rendering and effect algorithms. The following intersection geometries are available:</p>
<ul>
<li>Bounding Sphere</li>
<li>Axis-Aligned Bounding Box (AABB)</li>
<li>Orientated Bounding Box (OBB) (partial)</li>
<li>Plane</li>
<li>Ray</li>
<li>Frustum</li>
</ul>
<p>Example of performing a simple ray/sphere intersection test:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">BoundsSphere sphere(Vector3f(0.0f, 0.0f, 0.0f), 10.0f);</span><br><span class="line">Ray ray(Vector3f(0.0f, 0.0f, -5.0f), Vector3f(0.0f, 0.0f, 1.0f));</span><br><span class="line"></span><br><span class="line">Vector3f point;</span><br><span class="line">float dist = 0.0f;</span><br><span class="line"></span><br><span class="line">if(ray.intersects(sphere, point, dist))</span><br><span class="line">&#123;</span><br><span class="line">    OcularLogger-&gt;info("Ray intersects sphere at ", OcularString-&gt;toString(point));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="Resource-System"><a href="#Resource-System" class="headerlink" title="Resource System"></a>Resource System</h1><p>Ocular features a flexible and easy-to-use resource system which makes working with external resources as simple as possible.</p>
<p>To begin, a <code>Resource</code> is defined loosely as a collection of data that can, and typically is, stored on disk. All managed resources are shared, meaning there is only one instance in memory even if the same resource is used by multiple objects.</p>
<p>Ocular defines the following resource types:</p>
<ul>
<li>Texture</li>
<li>Mesh</li>
<li>Material</li>
<li>Shader</li>
<li>ShaderProgram</li>
<li>Data</li>
<li>Multi-Resource</li>
</ul>
<p>While one may directly create a <code>Resource</code>, it is much more common to interact with the aptly named <code>ResourceManager</code>.</p>
<p>All on-disk resources are expected to reside in a <code>Resources</code> directory, which by default is expected on the same level as the executable (see <code>ResourceManager::setSourceDirectory</code> to change this at runtime).</p>
<h2 id="Resource-Manager"><a href="#Resource-Manager" class="headerlink" title="Resource Manager"></a>Resource Manager</h2><p>The <code>ResourceManager</code> is responsible for loading, saving, tracking, allocating space, freeing memory, and anything else related to resource management. Perhaps the best way to cover the <code>ResourceManager</code>, and the resource system as a whole, is with a series of simple examples of common actions.</p>
<h3 id="Retrieving-a-Resource"><a href="#Retrieving-a-Resource" class="headerlink" title="Retrieving a Resource"></a>Retrieving a Resource</h3><p>The most often used <code>ResourceManager</code> method is <code>getResource</code>. This will seach for a resource with the specified mapping name and return it if it exists. If the resource is not in memory, then the manager will automatically allocate space and load it.</p>
<p>Before we show a code example, it should be explain what a resource mapping name is. Simply put, this is an unique string identifier for every resource available. For ease-of-use, mapping names are the relative path from the <code>Resources</code> directory.</p>
<p>For example, if we have the following directory structure:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">OcularProject/</span><br><span class="line">    Resources/</span><br><span class="line">        Textures/</span><br><span class="line">            Buildings/</span><br><span class="line">            Terrain/</span><br><span class="line">                Grass.png</span><br><span class="line">                Sand.bmp</span><br></pre></td></tr></table></figure>
<p>The mapping names for the grass and sand textures would be:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&quot;Textures/Terrain/Grass&quot;</span><br><span class="line">&quot;Textures/Terrain/Sand&quot;</span><br></pre></td></tr></table></figure>
<p>Note that the file extension is not part of the mapping name. This behaviour has both pros and cons. </p>
<p>By not including the extension in the uniquely-identifying mapping name it means the higher-level user does not need to be concerned about specific file formats, or if the artist decided to replace all <code>.bmp</code> files with <code>.png</code>, or if model meshes are now using <code>.obj</code> instead of <code>.ply</code>.</p>
<p>On the downside is that naming conflicts may occur if one has two or more resources in the same directory with matching names, but different formats (i.e. <code>Grass.png</code> and <code>Grass.bmp</code>). In which case, the first of these resources discovered will be the one used.</p>
<p>Now with our mapping name in hand we can retrieve our resource:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">auto</span> grassTex = OcularResources-&gt;getResource(<span class="string">"Textures/Terrain/Grass"</span>);</span><br></pre></td></tr></table></figure>
<p>The above will return the resource as a generic <code>Resource*</code>. If we already know the type of resource, we can do the following:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">auto</span> grassTex = OcularResources-&gt;getResource&lt;Texture&gt;(<span class="string">"Textures/Terrain/Grass"</span>);</span><br></pre></td></tr></table></figure>
<p>Which returns a <code>Texture*</code>.</p>
<h3 id="Saving-a-Resource"><a href="#Saving-a-Resource" class="headerlink" title="Saving a Resource"></a>Saving a Resource</h3><p>Saving a resource to disk is as simple as retrieving one:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">auto</span> resource = OcularResource-&gt;getResource(<span class="string">"Path/To/Resource"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(resource)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// ... modify resource ...</span></span><br><span class="line"></span><br><span class="line">    OcularResources-&gt;saveResource(resource, resource-&gt;getSourceFile());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Destroying-a-Resource"><a href="#Destroying-a-Resource" class="headerlink" title="Destroying a Resource"></a>Destroying a Resource</h3><p>All managed resources are governed by the <code>ResourceManager</code> and shared throughout the engine. Because of this, a resource may not be destroyed as this could have negative consequences elsewhere.</p>
<p>While memory use is automatically managed by the <code>ResourceManager</code>, one may explicitly unload a resource from memory. While the resource object itself will still be valid, any underlying data (such as texture pixels, mesh vertices, etc.) will be cleared away.</p>
<p>This may be useful if one knows they are done with a particular resource (scene change, etc.).</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">auto</span> resource = OcularResources-&gt;getResource(<span class="string">"ExampleResource"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">resource-&gt;unload();</span><br></pre></td></tr></table></figure>
<p>It should be noted that a resource that has been unloaded will be loaded into memory again the next time it is requested via <code>getResource</code>. So calling <code>unload</code> when the resource is still active can prove to be detrimental by causing needless, and potentially very expensive, loads.</p>
<p>One can also check if the underlying data of a resource is in memory:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(!resource-&gt;isInMemory())</span><br><span class="line">&#123;</span><br><span class="line">    resource-&gt;forceLoad();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>A benefit of having all resource managed by the <code>ResourceManager</code> is that there is no need for the user to worry about manual clean-up.</p>
<h3 id="Unmanaged-Resources"><a href="#Unmanaged-Resources" class="headerlink" title="Unmanaged Resources"></a>Unmanaged Resources</h3><p>There may be times where one wants to load a resource from outside of the <code>Resources</code> directory, or to load a copy of a managed resource (remember, all managed resources are shared).</p>
<p>For these situations one may create an unmanaged resource. These resources will be loaded by the <code>ResourceManager</code>, but will belong exclusively to the caller once created. Which means proper clean-up is required.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">auto</span> resource = OcularResources-&gt;loadUnmanagedResource(<span class="string">"apple.png"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(resource)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">    resource-&gt;unload();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">delete</span> resource;</span><br><span class="line">    resource = <span class="literal">nullptr</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Refreshing-Resource-Map"><a href="#Refreshing-Resource-Map" class="headerlink" title="Refreshing Resource Map"></a>Refreshing Resource Map</h3><p>By default, the internal map of all resources is only generated once at engine initialization. If the contents of the <code>Resource</code> directory are known to, or expected to, change then this map may be refreshed to account for any newly added resources.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">OcularResources-&gt;forceSourceRefresh();</span><br></pre></td></tr></table></figure>
<h2 id="Resource-Readers-and-Savers"><a href="#Resource-Readers-and-Savers" class="headerlink" title="Resource Readers and Savers"></a>Resource Readers and Savers</h2><p>â€¦</p>
<h1 id="Scene-System"><a href="#Scene-System" class="headerlink" title="Scene System"></a>Scene System</h1><h2 id="SceneObjects"><a href="#SceneObjects" class="headerlink" title="SceneObjects"></a>SceneObjects</h2><h2 id="Renderables"><a href="#Renderables" class="headerlink" title="Renderables"></a>Renderables</h2><h2 id="Routines"><a href="#Routines" class="headerlink" title="Routines"></a>Routines</h2><h2 id="SceneTrees"><a href="#SceneTrees" class="headerlink" title="SceneTrees"></a>SceneTrees</h2><h2 id="Camera"><a href="#Camera" class="headerlink" title="Camera"></a>Camera</h2><h2 id="Object-IO"><a href="#Object-IO" class="headerlink" title="Object IO"></a>Object IO</h2><h1 id="Graphics-Library"><a href="#Graphics-Library" class="headerlink" title="Graphics Library"></a>Graphics Library</h1><h2 id="GraphicsDriver"><a href="#GraphicsDriver" class="headerlink" title="GraphicsDriver"></a>GraphicsDriver</h2><h2 id="Textures"><a href="#Textures" class="headerlink" title="Textures"></a>Textures</h2><h2 id="Shaders"><a href="#Shaders" class="headerlink" title="Shaders"></a>Shaders</h2><h2 id="Uniforms"><a href="#Uniforms" class="headerlink" title="Uniforms"></a>Uniforms</h2><h2 id="Materials"><a href="#Materials" class="headerlink" title="Materials"></a>Materials</h2><h2 id="Meshes"><a href="#Meshes" class="headerlink" title="Meshes"></a>Meshes</h2><h2 id="Render-State"><a href="#Render-State" class="headerlink" title="Render State"></a>Render State</h2><h2 id="Debug-Tools"><a href="#Debug-Tools" class="headerlink" title="Debug Tools"></a>Debug Tools</h2><h1 id="Graphics-Implementations"><a href="#Graphics-Implementations" class="headerlink" title="Graphics Implementations"></a>Graphics Implementations</h1><h2 id="Direct3D-11"><a href="#Direct3D-11" class="headerlink" title="Direct3D 11"></a>Direct3D 11</h2><h2 id="OpenGL-4"><a href="#OpenGL-4" class="headerlink" title="OpenGL 4"></a>OpenGL 4</h2><h2 id="Other"><a href="#Other" class="headerlink" title="Other"></a>Other</h2><h1 id="Effects"><a href="#Effects" class="headerlink" title="Effects"></a>Effects</h1><h2 id="Lighting"><a href="#Lighting" class="headerlink" title="Lighting"></a>Lighting</h2><h2 id="Shadows"><a href="#Shadows" class="headerlink" title="Shadows"></a>Shadows</h2><h2 id="Particle-Systems"><a href="#Particle-Systems" class="headerlink" title="Particle Systems"></a>Particle Systems</h2><h2 id="Terrain"><a href="#Terrain" class="headerlink" title="Terrain"></a>Terrain</h2><h1 id="Editor"><a href="#Editor" class="headerlink" title="Editor"></a>Editor</h1><h2 id="Scene-Editing"><a href="#Scene-Editing" class="headerlink" title="Scene Editing"></a>Scene Editing</h2><h2 id="Material-Editing"><a href="#Material-Editing" class="headerlink" title="Material Editing"></a>Material Editing</h2>
</div>

            </div>
        </div>

        <div id="footer">
    <div id="footer_text">
        &copy; 2017 Steven T Sell <br/>
        Powered by <a href="http://www.hexo.io">Hexo</a> | Hosted by <a href="http://www.digitalocean.com">DigitalOcean</a>
    </div>
</div>

    </div>
</body>
</html>
